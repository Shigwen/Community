{% extends 'base.html.twig' %}

{% block title %}Hello AccountController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <span>Infos perso : </span>
	<a href="{{ path('user_account_edit')}}">Modifier</a>
    <p>email : {{ user.email }}</p>
</div>

<hr>
<div class="example-wrapper">
    <span>Liste des personnages : </span>
	<a href="{{ path('user_character_add')}}">Ajouter</a>

	<table>
		<thead>
			<tr>
				<th>Nom</th>
				<th>Classe</th>
				<th>Rôles</th>
				<th>Serveur</th>
				<th>Informations</th>
				<th>Action</th>
			</tr>
		</thead>
		<tbody>
			{% for character in user.characters %}
				<tr>
					<td>{{ character.name }}</td>
					<td>{{ character.characterClass.name }}</td>
					<td>{{ character.strRoles }}</td>
					<td>{{ character.server.name }}</td>
					<td>{{ character.information }}</td>
					<td>
						<a href="{{ path('user_character_edit', {id: character.id})}}">Modifier</a>
						<a href="{{ path('user_character_delete', {id: character.id})}}">Supprimer</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
</div>

{% if is_granted('ROLE_RAID_LEADER') %}
<hr>
<div class="example-wrapper">
    <span>Liste des raids créés : </span>
	<a href="{{ path('raidleader_raid_add')}}">Ajouter</a>
	<table>
		<thead>
			<tr>
				<th>Name</th>
				<th>Type</th>
				<th>Début</th>
				<th>Fin</th>
			</tr>
		</thead>
		<tbody>
			{% for raid in user.raids %}
				<tr>
					<td>{{ raid.name }}</td>
					<td>{{ raid.raidType }}</td>
					<td>{{ raid.startAt|date("d/m/Y h:i") }}</td>
					<td>{{ raid.endAt|date("d/m/Y h:i") }}</td>
					<td>
						<a href="{{ path('raidleader_raid_show', {id: raid.id})}}">Voir</a>
						<a href="{{ path('raidleader_raid_edit', {id: raid.id})}}">Modifier</a>
						<a href="{{ path('raidleader_raid_delete', {id: raid.id})}}">Supprimer</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
</div>
{% endif %}
{% endblock %}
