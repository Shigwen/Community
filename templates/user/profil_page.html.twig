{% extends 'base.html.twig' %}

{% block title %}Profile{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <span>Infos perso : </span>
	<p> Name : {{ user.name}} </p>
	{{ include('user/_form_account.html.twig') }}

	<hr>
    <span>Liste des personnages : </span>
	<table>
		<thead>
			<tr>
				<th>Nom</th>
				<th>Classe</th>
				<th>Rôles</th>
				<th>Serveur</th>
				<th>Informations</th>
				<th>Action</th>
			</tr>
		</thead>
		<tbody>
			{% for character in user.characters %}
				<tr>
					<td>{{ character.name }}</td>
					<td>{{ character.characterClass.name }}</td>
					<td>{{ character.strRoles }}</td>
					<td>{{ character.server.name }}</td>
					<td>{{ character.information }}</td>
					<td>
						<a href="{{ path('user_account')}}?id={{ character.id }}">Modifier</a>
						<a href="{{ path('user_character_delete', {id: character.id})}}">Supprimer</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<hr>
	{{ include('user/_form_character.html.twig') }}

	<hr>
	<span>Raids </span>
	<table>
		<thead>
			<tr>
				<th>Name</th>
				<th>Type</th>
				<th>Début</th>
				<th>Fin</th>
				<th>Action</th>
			</tr>
		</thead>
		<tbody>
			{% for raid in pendingRaids %}
				<tr>
					<td>{{ raid.name }}</td>
					<td>{{ raid.raidType }}</td>
					<td>{{ raid.startAt|date("d/m/Y h:i") }}</td>
					<td>{{ raid.endAt|date("d/m/Y h:i") }}</td>
					<td>
						<a href="{{ path('event_unregister', {id: raid.id})}}">Unregister</a>
					</td>
				</tr>
			{% endfor %}
			{% for raid in inProgressRaids %}
				<tr>
					<td>{{ raid.name }}</td>
					<td>{{ raid.raidType }}</td>
					<td>{{ raid.startAt|date("d/m/Y h:i") }}</td>
					<td>{{ raid.endAt|date("d/m/Y h:i") }}</td>
					<td></td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<hr>
	<span>Raids in waiting of raid leader validation </span>
	<table>
		<thead>
			<tr>
				<th>Name</th>
				<th>Type</th>
				<th>Début</th>
				<th>Fin</th>
				<th>Action</th>
			</tr>
		</thead>
		<tbody>
			{% for raid in waitOfConfirmationRaids %}
				<tr>
					<td>{{ raid.name }}</td>
					<td>{{ raid.raidType }}</td>
					<td>{{ raid.startAt|date("d/m/Y h:i") }}</td>
					<td>{{ raid.endAt|date("d/m/Y h:i") }}</td>
					<td>
						<a href="{{ path('event_unregister', {id: raid.id})}}">Unregister</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<a href="{{ path('user_raid_archived')}}">Show finished raids</a>

</div>
{% endblock %}
