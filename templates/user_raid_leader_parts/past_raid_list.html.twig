{% extends 'base.html.twig' %}

{% block title %}
    Past raid
{% endblock %}

{% block banner_title %}
    <h1>Past raid</h1>
{% endblock %}

{% block body %}

<div class="row col-12">
    <a class="btn btn-primary rounded-pill btn-lg" href="{{ path(pathToRefer)}}">
        <i class="fas fa-arrow-left"></i>
        {{ nameOfPageToRefer }}
    </a>
</div>

<div class="row d-flex justify-content-around">
    <div class="col-12 col-md-11 p-md-4 p-xs-1">
        {% if raids is empty %}
            <p class="text-center"> You did not complete any raid with this app yet </p>
        {% else %}
            <table class="table table-striped table-bordered table-hover table-dark">
                <thead class="text-center">
                    <tr>
                        <th scope="col">Faction</th>
                        <th scope="col">Name</th>
                        <th scope="col">Server</th>
                        <th scope="col">Date</th>
                        <th scope="col" class="d-none d-md-table-cell">RL as</th>
                        <th scope="col" class="d-none d-md-table-cell">Role</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>

                <tbody class="text-center">
                    {% for raid in raids %}
                        <tr>
                            {% set raidCharacter = get_raid_character_from_raidleader(raid) %}
                            <td>
                                <img src="{{ raidCharacter.userCharacter.faction.imageSource }}" 
                                width="40" height="40" alt="{{ raidCharacter.userCharacter.faction.name }}">
                            </td>
                            <td>{{ raid.name }}</td>
                            <td>{{ raidCharacter.userCharacter.server.name }}</td>
                            <td>{{ raid.startAt|date("d/m/Y") }} from {{ raid.startAt|date("H:i", user.timezone.name) }} to {{ raid.endAt|date("H:i", user.timezone.name) }}</td>
                            <td class="text-success d-none d-md-table-cell">{{ raidCharacter.userCharacter.name }}</td>
                            <td class="d-none d-md-table-cell">
                                <img src="{{ raidCharacter.role.imageSource }}" 
                                width="40" height="40" alt="{{ raidCharacter.role.name }}">
                            </td>
                            <td>
                                <a class="text-info text-decoration-none" href="{{ path('event', {id: raid.id }) }}">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% endif %}
    </div>
</div>

{% endblock %}
